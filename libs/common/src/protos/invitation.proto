syntax = "proto3";

package invitation;

// Invitation Service definition
service InvitationService {
  // Creates a new invitation
  rpc CreateInvitation (CreateInvitationRequest) returns (Invitation) {}
  // Gets an invitation by token
  rpc GetInvitationByToken (GetInvitationByTokenRequest) returns (Invitation) {}
  // Accepts an invitation
  rpc AcceptInvitation (AcceptInvitationRequest) returns (AcceptInvitationResponse) {}
  // Rejects an invitation
  rpc RejectInvitation (RejectInvitationRequest) returns (RejectInvitationResponse) {}
}

// ---- INVITATION MODULE REQUEST/RESPONSE ----

// The request message for creating a new invitation
message CreateInvitationRequest {
  string email = 1;
  string targetType = 2;
  int32 targetId = 3;
  int32 expiresAt = 4;
  int32 invitedByUserId = 5;
  repeated int32 roleIds = 6;
}

// The request message for getting an invitation by token
message GetInvitationByTokenRequest {
  string token = 1;
}

// The request message for accepting an invitation
message AcceptInvitationRequest {
  string token = 1;
  int32 invitedUserId = 2;
}

// The response message for accepting an invitation
message AcceptInvitationResponse {
  bool success = 1;
}

// The request message for rejecting an invitation
message RejectInvitationRequest {
  string token = 1;
}

// The response message for rejecting an invitation
message RejectInvitationResponse {
  bool success = 1;
}

// The invitation message
message Invitation {
  string id = 1;
  string token = 2;
  string email = 3;
  string targetType = 4;
  int32 targetId = 5;
  string status = 6;
  int32 expiresAt = 7;
  int32 invitedByUserId = 8;
  int32 invitedUserId = 9;
  string createdAt = 10;
  string updatedAt = 11;
  repeated int32 roleIds = 12;
}